# Skill Invocation Test Framework Configuration

framework:
  name: "OpenCode Skill Invocation Evaluator"
  version: "1.0.0"
  
  # Test execution settings
  execution:
    timeout_seconds: 120
    max_retries: 2
    parallel_jobs: 1  # Sequential for accurate skill detection
    
  # Agent modes to test
  agents:
    my-plan:
      description: "Read-only planning agent"
      file: ".opencode/agents/my-plan.md"
      permissions: ["read", "bd"]
      skills_expected:
        - github-ops  # For exploring repos, issues
        - context7-docs  # For documentation lookup
        - asu-discover  # For ASU-specific queries
        
    my-plan-exec:
      description: "Execution agent with write permissions"
      file: ".opencode/agents/my-plan-exec.md"
      permissions: ["read", "write", "edit", "bash"]
      skills_expected:
        - github-ops  # For PRs, issues, releases
        - context7-docs  # For library documentation
        - security-auditor  # For security scans
        - skill-creator  # For creating new skills
        - mcporter  # For MCP operations

  # Skills to test
  skills:
    github-ops:
      description: "GitHub operations via gh CLI"
      trigger_patterns:
        - "github"
        - "gh "
        - "repo"
        - "issue"
        - "pr "
        - "pull request"
        - "release"
        - "workflow"
        - "action"
      
    context7-docs:
      description: "Library documentation lookup"
      trigger_patterns:
        - "documentation"
        - "docs"
        - "react"
        - "next.js"
        - "vue"
        - "tailwind"
        - "mcp"
        - "library"
        - "api"
      
    security-auditor:
      description: "Security audit and scanning"
      trigger_patterns:
        - "security"
        - "audit"
        - "vulnerability"
        - "scan"
        - "semgrep"
        - "secret"
        - "credential"
      
    skill-creator:
      description: "AI-assisted skill creation"
      trigger_patterns:
        - "new skill"
        - "create skill"
        - "skill template"
      
    mcporter:
      description: "MCP server operations"
      trigger_patterns:
        - "mcp"
        - "mcp server"
        - "model context protocol"

  # Detection settings
  detection:
    methods:
      - log_parsing      # Parse OpenCode logs for skill loading
      - tool_tracking    # Track which tools are invoked
      - output_analysis  # Analyze agent output for skill references
    
    skill_load_indicators:
      - "Loading skill"
      - "Skill loaded"
      - "Using skill"
      - "@skill/"
      
  # Reporting settings
  reporting:
    formats:
      - markdown
      - json
    metrics:
      - skill_trigger_rate
      - false_positive_rate
      - miss_rate
      - tool_accuracy
      - latency_ms
